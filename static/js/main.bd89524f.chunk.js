(window["webpackJsonptype-racer"]=window["webpackJsonptype-racer"]||[]).push([[0],{115:function(e,t,a){e.exports={userItem:"TopPlayers_userItem__3fnZi",wpmStatus:"TopPlayers_wpmStatus__3b1rx",listHeader:"TopPlayers_listHeader__jjc-W"}},116:function(e,t,a){e.exports={logo:"Home_logo__12b51","logo-spin":"Home_logo-spin__2Qo13",grow:"Home_grow__1IOpb",header:"Home_header__3iaKa"}},152:function(e,t,a){e.exports={typed:"CheckedText_typed__3CHZn",typing:"CheckedText_typing__VSSvF"}},215:function(e,t,a){e.exports={app:"App_app__2ziFi"}},216:function(e,t,a){e.exports=a.p+"static/media/404.b3f1c2e9.svg"},235:function(e,t,a){e.exports=a.p+"static/media/logo.9d028f49.png"},251:function(e,t,a){e.exports=a(417)},416:function(e,t,a){},417:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(63),o=a.n(c),s=(a(256),a(37)),l=a(16),i=a(70),u=a(53),m=a(215),p=a.n(m),d=a(216),b=a.n(d);var O=n.a.memo(()=>n.a.createElement("img",{src:b.a,style:{height:"100vh"},alt:"404"})),g=a(114);var f=n.a.createContext([{currentUser:void 0,players:[]},()=>{}]);var h=n.a.memo(e=>{let t=e.component,a=Object(g.a)(e,["component"]);const c=Object(r.useContext)(f),o=Object(l.a)(c,1)[0];return n.a.createElement(u.b,Object.assign({},a,{render:e=>o.currentUser?n.a.createElement(t,e):n.a.createElement(u.a,{to:{pathname:"/",state:{from:e.location}}})}))}),y=a(437),j=a(438),E=a(435),v=a(428),w=a(84),k=a(418);var P=[{id:"19putj",gender:"male",nickname:"rudolf",password:"123123"},{id:"mhy87",gender:"male",nickname:"bob",password:"123123"},{id:"t1pvr",gender:"female",nickname:"maria",password:"123123"},{id:"15jtl3",gender:"male",nickname:"john",password:"123123"},{id:"1092av",gender:"female",nickname:"oxy",password:"123123"}],x=a(219),S=a.n(x);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const _={},T=(e,t={})=>new Promise((a,r)=>{const n=new XMLHttpRequest;n.open((t.method?t.method:"get").toUpperCase(),((e,t)=>e+S.a.stringify(t,{addQueryPrefix:!0}))(e,t.params),!0);const c=W({},_,{},t.headers);Object.keys(c).forEach(e=>{n.setRequestHeader(e,c[e])}),n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE)if(n.status>=200&&n.status<400)try{a({data:n.responseText?JSON.parse(n.responseText):void 0,statusCode:n.status})}catch(e){r({error:e,statusCode:n.status})}else if(n.status)try{r({error:JSON.parse(n.responseText),statusCode:n.status})}catch(e){r({error:e,statusCode:n.status})}else r({error:"An error occurred while sending the request.",statusCode:n.status})},n.onerror=function(){r({error:"Network error",statusCode:n.status})},n.send(JSON.stringify(t.data))});var D=((e={})=>{return["delete","get","head","options","post","put","patch"].reduce((t,a)=>(t[a]=(t,r={})=>T(t,W({},e,{},r,{method:a})),t),{})})();function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const F=e=>D.get(`https://api.myjson.com/bins/${e.id}`).then(({data:e})=>e);var U=e=>{const t=Object(r.useState)([]),a=Object(l.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)(()=>{n.length&&e!==n.length-1||D.get("https://baconipsum.com/api/",{params:{type:"meat-and-filler",paras:1}}).then(({data:e})=>e).then(e=>c(t=>[...t,...e]))},[e,n]),[n]},M=a(427),R=a(429),A=a(46);var H=n.a.memo(e=>{const t=e.seconds,a=e.onEnd,c=e.onTick,o=Object(r.useState)(t),s=Object(l.a)(o,2),i=s[0],u=s[1],m=Object(r.useRef)(c);return Object(r.useEffect)(()=>{m.current=c},[c]),Object(r.useEffect)(()=>{const e=setInterval(()=>{u(r=>{const n=--r;return m.current&&m.current(t-n),0===n&&(a&&a(),clearInterval(e)),n})},1e3);return()=>clearInterval(e)},[]),n.a.createElement(w.a,null,n.a.createElement(A.a,{name:"clock"}),n.a.createElement("span",{style:{width:"35px",display:"inline-block"}},i))}),z=a(426);var J=n.a.memo(e=>{const t=e.expectedWord,a=e.onInputChange,c=e.onWordMatch,o=e.disabled,s=e.value,l=Object(r.useRef)(null);Object(r.useEffect)(()=>{l.current&&l.current.focus()},[l]);const i=Object(r.useCallback)((e,{value:r})=>{let n=r;r===t&&(n="",c()),a(n)},[t,a,c]);return n.a.createElement(z.a,{fluid:!0,ref:l,value:s,disabled:o,onChange:i,placeholder:"Type the above text here when the race begins "})}),$=a(4),L=a.n($),q=a(436),G=a(152),B=a.n(G);var Q=e=>{const t=e.textMap,a=e.currentWordIndex,r=Array.from(t.words());return n.a.createElement(q.a,{inverted:!0},r.map((e,t)=>{const r=t===a,c=t<a;return n.a.createElement("span",{key:t,className:L()({[B.a.typed]:c,[B.a.typing]:r})},e.text)}))};const X=e=>{const t=((e,t,a)=>Array.from(function*(e,t){let a=e.exec(t);for(;a;)yield a,a=e.exec(t)}(e,t)).map(a))(/[^\s]+(\s|$)/g,e,e=>(({offset:e,text:t})=>{const a=t.match(/([^\s]+)(\s|$)/).slice(1),r=Object(l.a)(a,2),n=r[0],c=r[1];return{letters:Array.from(t),offset:e,text:t,whitespace:c,word:n,hasWhitespace:()=>Boolean(c)}})({text:e[0],offset:e.index}));return{text:e,getWord:e=>t[e],getWordOffset:e=>t[e].offset,words:()=>t.values(),wordsCount:()=>t.length}};var Z=n.a.memo(({text:e,onFinish:t,maxTime:a})=>{const c=Object(r.useState)(0),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Object(r.useState)(0),m=Object(l.a)(u,2),p=m[0],d=m[1],b=Object(r.useState)(1),O=Object(l.a)(b,2),g=O[0],f=O[1],h=Object(r.useState)(""),j=Object(l.a)(h,2),E=j[0],v=j[1],w=Object(r.useState)(!1),k=Object(l.a)(w,2),P=k[0],x=k[1],S=Object(r.useMemo)(()=>X(e),[e]),C=Object(r.useMemo)(()=>S.getWord(p),[S,p]),W=Object(r.useCallback)(()=>{t&&t({wpm:s,progress:g})},[t,s,g]);Object(r.useEffect)(()=>{100===g&&W()},[W,g]);const _=Object(r.useCallback)(()=>{x(!0)},[x]),T=Object(r.useCallback)(()=>{p<S.wordsCount()-1?(f(100*(p+1)/S.wordsCount()),d(p+1)):f(100)},[d,f,p,S]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{inverted:!0},P?n.a.createElement(n.a.Fragment,null,"The race is on! Type the text below:"," ",n.a.createElement(H,{key:"game-timer",seconds:a,onEnd:W,onTick:e=>{i(Math.floor(60*p/e))}})):n.a.createElement(n.a.Fragment,null,"Get Ready to Race:"," ",n.a.createElement(H,{key:"waiting-timer",seconds:10,onEnd:_}))),n.a.createElement("div",null,"WPM: ",s),n.a.createElement(M.a,{percent:g,indicating:!0,color:"olive"}),n.a.createElement(Q,{textMap:S,currentWordIndex:p}),n.a.createElement(R.a.Field,null,n.a.createElement(J,{expectedWord:C.text,disabled:!P,value:E,onInputChange:v,onWordMatch:T})))});function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var V=n.a.memo(()=>{const e=Object(r.useState)(0),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(r.useContext)(f),i=Object(l.a)(o,1)[0].currentUser,u=Object(r.useState)(!0),m=Object(l.a)(u,2),p=m[0],d=m[1],b=Object(r.useState)({wpm:0,progress:0}),O=Object(l.a)(b,2),g=O[0],h=O[1],y=U(a),j=Object(l.a)(y,1)[0],E=j[a],P=Object(r.useCallback)(({wpm:e,progress:t})=>{100===t&&i&&(!i.bestWpm||e>Number(i.bestWpm))&&(e=>{D.put(`https://api.myjson.com/bins/${e.id}`,{data:I({},e),headers:{"content-type":"application/json;charset=UTF-8"}})})(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},i,{bestWpm:e})),h({wpm:e,progress:t}),c(e=>e+1),d(!1)},[i]),x=Object(r.useCallback)(()=>d(!0),[d]);return n.a.createElement("div",null,j.length?p?n.a.createElement(Z,{text:E,onFinish:P,maxTime:180}):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(w.a,null,"WPM: ",g.wpm),n.a.createElement(w.a,null,"Progress: ",g.progress," %")),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(k.a,{onClick:x,color:"blue"},"Play Again")):n.a.createElement(v.a,{inverted:!0,active:!0,inline:"centered"},"Loading..."))}),Y=a(439),ee=a(432),te=a(244),ae=a(115),re=a.n(ae);const ne=()=>{const e=Object(r.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)(()=>{const e=()=>Promise.all(P.map(F)).then(([...e])=>e.filter(e=>!(e=>"status"in e&&[404,500].includes(e.status))(e))).then(e=>{const t=e.filter(e=>"nickname"in e);n(t.sort((e,t)=>e.bestWpm?t.bestWpm?Number(t.bestWpm)-Number(e.bestWpm):-1:1))});e();const t=setInterval(e,5e3);return()=>clearInterval(t)},[]),[a]};var ce=n.a.memo(()=>{const e=ne(),t=Object(l.a)(e,1)[0];return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Top Players"),n.a.createElement("div",{className:re.a.listHeader},"wpm"),n.a.createElement(Y.a.Group,{inverted:!0,divided:!0,relaxed:!0,as:ee.a,duration:200,size:"large",verticalAlign:"middle",style:{marginTop:0}},t.map(e=>n.a.createElement(ee.a.Item,{key:e.nickname},n.a.createElement("div",{className:re.a.userItem},n.a.createElement(te.a,{avatar:!0,src:"/type-racer"+`/${e.gender}.png`}),n.a.createElement("span",null,e.nickname),n.a.createElement("span",{className:re.a.wpmStatus},e.bestWpm?e.bestWpm:"-"))))))}),oe=a(433);const se=()=>{const e=sessionStorage.getItem("TypeRacer2019");return e?JSON.parse(e):e},le=e=>new Promise((t,a)=>{const r=P.find(({nickname:t,password:a})=>e.nickname===t&&e.password===a);r?F(r).then(e=>{"nickname"in e&&e.nickname===r.nickname?((e=>{e.password;let t=Object(g.a)(e,["password"]);sessionStorage.setItem("TypeRacer2019",JSON.stringify(t))})(r),t(e)):a()}):a()});var ie=Object(u.g)(n.a.memo(({history:e})=>{const t=Object(r.useCallback)(()=>new Promise(e=>{sessionStorage.removeItem("TypeRacer2019"),e()}).then(()=>e.push("/")),[e]),a=Object(r.useContext)(f),c=Object(l.a)(a,1)[0],o=c.currentUser&&c.currentUser.gender||"male";return n.a.createElement(oe.a,{direction:"left",text:c.currentUser&&c.currentUser.nickname,icon:n.a.createElement(te.a,{style:{display:"inline-block",marginLeft:"5px"},circular:!0,size:"mini",src:"/type-racer"+`/${o}.png`})},n.a.createElement(oe.a.Menu,null,n.a.createElement(oe.a.Item,{icon:"sign-out",text:"Sign out",onClick:t})))}));var ue=n.a.memo(()=>n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{inverted:!0,dividing:!0,textAlign:"right",style:{padding:"5px"}},n.a.createElement(ie,null)),n.a.createElement(j.a,{maxWidth:j.a.onlyTablet.minWidth},n.a.createElement("div",{style:{padding:"10px"}},n.a.createElement(V,null),n.a.createElement("br",null),n.a.createElement(ce,null))),n.a.createElement(j.a,{minWidth:j.a.onlyTablet.minWidth},n.a.createElement(E.a,{stackable:!0,divided:!0,inverted:!0,style:{padding:"0 20px"}},n.a.createElement(E.a.Column,{width:4},n.a.createElement(ce,null)),n.a.createElement(E.a.Column,{width:12},n.a.createElement(V,null)))))),me=a(116),pe=a.n(me),de=a(235),be=a.n(de),Oe=a(430),ge=a(434);function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var he=n.a.memo(({onClose:e,open:t,onSigninSuccess:a})=>{const c=Object(r.useContext)(f),o=Object(l.a)(c,2)[1],i=Object(r.useState)(!1),u=Object(l.a)(i,2),m=u[0],p=u[1],d=Object(r.useState)(""),b=Object(l.a)(d,2),O=b[0],g=b[1],h=Object(r.useState)(!1),j=Object(l.a)(h,2),E=j[0],v=j[1],w=Object(r.useState)(""),P=Object(l.a)(w,2),x=P[0],S=P[1],C=Object(r.useCallback)((e,{value:t})=>g(t),[]),W=Object(r.useCallback)((e,{value:t})=>S(t),[]),_=Object(r.useCallback)(()=>{p(!0),le({nickname:O,password:x}).then(e=>{o(t=>(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e})({},t,{currentUser:e})),a()}).catch(()=>v(!0)).finally(()=>p(!1))},[O,x,a,o]),T=O&&x;return n.a.createElement(Oe.a,{dimmer:!0,size:"small",open:t,onClose:e},n.a.createElement(Oe.a.Content,{image:!0},n.a.createElement(te.a,{circular:!0,size:"medium",src:"/type-racer/male.png"}),n.a.createElement(Oe.a.Description,null,n.a.createElement(y.a,null,"Sign in"),n.a.createElement(R.a,{onSubmit:_},n.a.createElement(R.a.Field,null,n.a.createElement(z.a,{error:E,placeholder:"Nickname...",icon:n.a.createElement(A.a,{name:"user",color:"blue"}),value:O,onChange:C})),n.a.createElement(R.a.Field,null,n.a.createElement(z.a,{error:E,type:"password",placeholder:"Password...",icon:n.a.createElement(A.a,{name:"key",color:"blue"}),value:x,onChange:W})),n.a.createElement(k.a,{fluid:!0,type:"submit",color:"teal",disabled:m||!T,loading:m},"Sign in"),E&&n.a.createElement(ge.a,{negative:!0},n.a.createElement("p",null,"Try another nickname or password"))))))});var ye=e=>{const t=e.match,a=e.history,c=e.location,o=Object(r.useCallback)(()=>{a.push("/?sign-in")},[a]),s=Object(r.useCallback)(()=>{a.push(t.path)},[a,t]),l=Object(r.useMemo)(()=>c.search.includes("?sign-in"),[c.search]),u=Object(r.useCallback)(()=>{a.push("/dashboard")},[a]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:pe.a.header},n.a.createElement("div",{className:pe.a.grow},n.a.createElement("img",{src:be.a,className:pe.a.logo,alt:"logo"}))),n.a.createElement("main",null,n.a.createElement("h2",null,"Type Racer Game"),n.a.createElement("div",{className:""},"Increase your typing speed!"),n.a.createElement("br",null),se()?n.a.createElement(i.b,{to:"/dashboard"},n.a.createElement(k.a,{color:"teal",size:"big"},"My Dashboard")):n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{color:"teal",size:"big",onClick:o},"Get Started \xa0 \ud83d\ude80"),n.a.createElement(he,{open:l,onClose:s,onSigninSuccess:u}))))};function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Ee=()=>{const e=Object(r.useState)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},{currentUser:void 0,players:[]},{currentUser:se()})),t=Object(l.a)(e,2),a=t[0],c=t[1];return n.a.createElement("div",{className:p.a.app},n.a.createElement(f.Provider,{value:[a,c]},n.a.createElement(i.a,{basename:"/type-racer"},n.a.createElement(u.d,null,n.a.createElement(u.b,{exact:!0,path:"/",component:ye}),n.a.createElement(h,{path:"/dashboard",component:ue}),n.a.createElement(u.b,{component:O})))))};a(416);const ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function we(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}o.a.render(n.a.createElement(Ee,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/type-racer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="/type-racer/service-worker.js";ve?(!function(e,t){fetch(e).then(a=>{const r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):we(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):we(t,e)})}}()}},[[251,1,2]]]);
//# sourceMappingURL=main.bd89524f.chunk.js.map