{"version":3,"sources":["modules/Home/Home.module.scss","modules/Game/components/CheckedText/CheckedText.module.scss","modules/TopPlayers/TopPlayers.module.scss","App.module.scss","components/Page404/404.svg","modules/Home/logo.png","components/Page404/Page404.tsx","store/context.ts","components/PrivateRoute/PrivateRoute.tsx","mock/users.ts","utils/request/request.ts","dataProvider/dataProvider.tsx","modules/Game/hooks/useTexts.ts","components/Timer/Timer.tsx","modules/Game/components/CheckedInput/CheckedInput.tsx","modules/Game/components/CheckedText/CheckedText.tsx","modules/Game/utils/textMap.ts","modules/Game/ActiveGame.tsx","modules/Game/Game.tsx","modules/TopPlayers/TopPlayers.tsx","store/session.ts","components/ProfileDropdown/ProfileDropdown.tsx","modules/Dashboard/Dashboard.tsx","modules/Home/SignInModal/SignInModal.tsx","modules/Home/Home.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","React","memo","src","imgSrc","style","height","alt","createContext","currentUser","undefined","players","Component","component","rest","useContext","StoreContext","state","render","props","to","pathname","from","location","users","id","gender","nickname","password","defaultHeaders","createXhr","url","config","Promise","resolve","reject","request","XMLHttpRequest","open","method","toUpperCase","params","qs","stringify","addQueryPrefix","buildURL","headers","Object","keys","forEach","key","setRequestHeader","onreadystatechange","readyState","DONE","status","data","responseText","JSON","parse","statusCode","error","onerror","send","createRequest","defaultConfig","reduce","acc","fetchUser","user","get","then","useTexts","activeTextIdx","useState","texts","setTexts","useEffect","length","type","paras","nextTexts","prevTexts","seconds","onEnd","onTick","secondsLeft","setSecondsLeft","onTickCb","useRef","current","intervalId","setInterval","prevSeconds","timeLeft","clearInterval","Label","Icon","name","width","display","expectedWord","onInputChange","onWordMatch","disabled","value","inputRef","focus","onChange","useCallback","_","newValue","updatedValue","Input","fluid","ref","placeholder","CheckedText","textMap","currentWordIndex","words","Array","Segment","inverted","map","word","wordIndex","isCurrent","isTyped","className","cx","styles","typed","typing","text","allWords","regex","str","fn","match","exec","allMatches","mapMatches","offset","slice","whitespace","letters","hasWhitespace","Boolean","Word","index","getWord","i","getWordOffset","values","wordsCount","onFinish","maxTime","wpm","setWpm","setWordIndex","progress","setProgress","currentInput","setCurrentInput","isGameStarted","setIsGameStarted","useMemo","utils","currentWord","onGameFinish","onWaitingTimerEnd","Header","elapsedSeconds","Math","floor","Progress","percent","indicating","color","Form","Field","setActiveTextIdx","inGame","setInGame","result","setResult","currentText","bestWpm","Number","put","updateUserDP","prevIdx","tryAgain","Button","onClick","Loader","active","inline","useUsersResult","setUsers","fetch","all","userResponses","filter","u","includes","isErrorResponse","filteredData","dataItem","sort","a","b","Transition","Group","as","List","duration","divided","size","verticalAlign","textAlign","Item","userItem","Image","avatar","process","wpmStatus","getUser","sessionStorage","getItem","signin","mockUser","find","userDb","setItem","setUserToStorage","withRouter","history","logout","removeItem","push","Dropdown","direction","icon","marginLeft","circular","Menu","dividing","padding","Responsive","maxWidth","onlyTablet","minWidth","Grid","stackable","Column","SignInModal","onClose","onSigninSuccess","setState","inProgress","setInProgress","setNickName","hasError","setHasError","setPassword","changeNickName","changePassword","login","prevState","catch","finally","isValid","Modal","dimmer","Content","image","Description","onSubmit","loading","Message","negative","Home","openSignModal","closeSignModal","path","isSignModalOpen","search","header","grow","logo","App","app","Provider","basename","exact","Dashboard","Page404","isLocalhost","window","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","ReactDOM","document","getElementById","URL","href","origin","addEventListener","response","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.8e849503.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"Home_logo__12b51\",\"logo-spin\":\"Home_logo-spin__2Qo13\",\"grow\":\"Home_grow__1IOpb\",\"header\":\"Home_header__3iaKa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"typed\":\"CheckedText_typed__3CHZn\",\"typing\":\"CheckedText_typing__VSSvF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userItem\":\"TopPlayers_userItem__3fnZi\",\"wpmStatus\":\"TopPlayers_wpmStatus__3b1rx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__2ziFi\"};","module.exports = __webpack_public_path__ + \"static/media/404.b3f1c2e9.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.9d028f49.png\";","import React from 'react';\nimport imgSrc from './404.svg';\n\nconst Page404 = () => (\n  <img src={imgSrc} style={{ height: '100vh' }} alt=\"404\" />\n);\n\nexport default React.memo(Page404);\n","import React from 'react';\n\nimport { User } from '../types';\n\nexport interface State {\n  currentUser: User | undefined;\n  players: User[];\n}\n\nexport type Context = [State, React.Dispatch<React.SetStateAction<State>>];\n\nexport const getInitialState = (): State => ({\n  currentUser: undefined,\n  players: [],\n});\n\nexport default React.createContext<Context>([\n  getInitialState(),\n  // tslint:disable-next-line\n  () => {},\n]);\n","import React, { useContext } from 'react';\nimport {\n  Redirect,\n  Route,\n  RouteComponentProps,\n  RouteProps,\n} from 'react-router-dom';\nimport StoreContext from '../../store/context';\n\ninterface Props extends RouteProps {\n  component: React.ComponentType<RouteComponentProps>;\n}\n\nconst PrivateRoute = ({ component: Component, ...rest }: Props) => {\n  const [state] = useContext(StoreContext);\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        state.currentUser ? (\n          <Component {...props} />\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/',\n              state: { from: props.location },\n            }}\n          />\n        )\n      }\n    />\n  );\n};\n\nexport default React.memo(PrivateRoute);\n","import { User } from '../types';\n\nconst users: User[] = [\n  {\n    id: '19putj',\n    gender: 'male',\n    nickname: 'rudolf',\n    password: '123123',\n  },\n  {\n    id: 'mhy87',\n    gender: 'male',\n    nickname: 'bob',\n    password: '123123',\n  },\n  {\n    id: 't1pvr',\n    gender: 'female',\n    nickname: 'maria',\n    password: '123123',\n  },\n  {\n    id: '15jtl3',\n    gender: 'male',\n    nickname: 'john',\n    password: '123123',\n  },\n  {\n    id: '1092av',\n    gender: 'female',\n    nickname: 'oxy',\n    password: '123123',\n  },\n];\n\nexport default users;\n","import qs from 'qs';\n\ninterface RequestParams {\n  data?: object;\n  params?: object;\n  headers?: any;\n}\n\ninterface RequestConfig extends RequestParams {\n  method?: RequestMethod;\n}\n\ntype RequestFn = (\n  url: string,\n  config?: RequestParams | undefined,\n) => Promise<Response>;\n\ntype RequestMethod =\n  | 'delete'\n  | 'get'\n  | 'head'\n  | 'post'\n  | 'put'\n  | 'patch'\n  | 'options';\n\ntype RequestClient = { [method in RequestMethod]: RequestFn };\n\ninterface Response {\n  error?: string;\n  data?: any;\n  statusCode: number;\n}\n\nconst buildURL = (url: string, params?: object): string => {\n  return url + qs.stringify(params, { addQueryPrefix: true });\n};\n\nconst defaultHeaders = {\n  // 'content-type': 'application/json;charset=UTF-8',\n};\n\nconst createXhr: RequestFn = (\n  url: string,\n  config: RequestConfig | undefined = {},\n) =>\n  new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\n      (config.method ? config.method : 'get').toUpperCase(),\n      buildURL(url, config.params),\n      true,\n    );\n\n    const headers = { ...defaultHeaders, ...config.headers };\n    Object.keys(headers).forEach(key => {\n      request.setRequestHeader(key, headers[key]);\n    });\n\n    request.onreadystatechange = () => {\n      if (request.readyState === XMLHttpRequest.DONE) {\n        if (request.status >= 200 && request.status < 400) {\n          try {\n            resolve({\n              data: request.responseText\n                ? JSON.parse(request.responseText)\n                : undefined,\n              statusCode: request.status,\n            });\n          } catch (error) {\n            reject({ error, statusCode: request.status });\n          }\n        } else if (request.status) {\n          try {\n            reject({\n              error: JSON.parse(request.responseText),\n              statusCode: request.status,\n            });\n          } catch (error) {\n            reject({ error, statusCode: request.status });\n          }\n        } else {\n          reject({\n            error: 'An error occurred while sending the request.',\n            statusCode: request.status,\n          });\n        }\n      }\n    };\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject({ error: 'Network error', statusCode: request.status });\n    };\n    request.send(JSON.stringify(config.data));\n  });\n\nconst createRequest = (\n  defaultConfig: RequestConfig | undefined = {},\n): RequestClient => {\n  const methods = [\n    'delete',\n    'get',\n    'head',\n    'options',\n    'post',\n    'put',\n    'patch',\n  ] as RequestMethod[];\n  return methods.reduce<RequestClient>(\n    (acc, method: RequestMethod) => {\n      acc[method] = (url: string, config: RequestParams | undefined = {}) =>\n        createXhr(url, {\n          ...defaultConfig,\n          ...config,\n          method,\n        } as RequestConfig);\n      return acc;\n    },\n    {} as RequestClient,\n  );\n};\n\nexport default createRequest();\n","import users from '../mock/users';\nimport { User } from '../types';\nimport { request } from '../utils';\n\ninterface ErrorResponse {\n  status: 404 | 500;\n  message: string;\n}\n\ntype UserResponse = ErrorResponse | User;\n\nexport const fetchRandomText = (): Promise<string[]> =>\n  request\n    .get('https://baconipsum.com/api/', {\n      params: { type: 'meat-and-filler', paras: 1 },\n    })\n    .then(({ data }) => data);\n\nexport const fetchUser = (user: User): Promise<UserResponse> =>\n  request\n    .get(`https://api.myjson.com/bins/${user.id}`)\n    .then(({ data }) => data);\n\nexport const isErrorResponse = (user: UserResponse) => {\n  if ('status' in user) {\n    return [404, 500].includes(user.status);\n  }\n  return false;\n};\n\nexport const updateUser = (user: User) => {\n  request.put(`https://api.myjson.com/bins/${user.id}`, {\n    data: { ...user },\n    headers: {\n      'content-type': 'application/json;charset=UTF-8',\n    },\n  });\n};\n\nexport const fetchAllUsers = (): Promise<UserResponse[]> =>\n  Promise.all(users.map(fetchUser)).then(([...userResponses]) =>\n    userResponses.filter(u => !isErrorResponse(u)),\n  );\n","import { useEffect, useState } from 'react';\nimport { fetchRandomText } from '../../../dataProvider';\n\nconst useTexts = (activeTextIdx: number) => {\n  const [texts, setTexts] = useState<string[]>([]);\n  useEffect(() => {\n    if (!texts.length || activeTextIdx === texts.length - 1) {\n      fetchRandomText().then(nextTexts =>\n        setTexts(prevTexts => [...prevTexts, ...nextTexts]),\n      );\n    }\n  }, [activeTextIdx, texts]);\n  return [texts];\n};\n\nexport default useTexts;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Icon, Label } from 'semantic-ui-react';\n\ntype OnTick = (elapsedSeconds: number) => void;\ninterface Props {\n  seconds: number;\n  onEnd?: () => void;\n  onTick?: OnTick;\n}\n\nconst Timer = (props: Props) => {\n  const { seconds, onEnd, onTick } = props;\n  const [secondsLeft, setSecondsLeft] = useState(seconds);\n  const onTickCb = useRef<OnTick | undefined>(onTick);\n\n  useEffect(() => {\n    onTickCb.current = onTick;\n  }, [onTick]);\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      setSecondsLeft(prevSeconds => {\n        const timeLeft = --prevSeconds;\n        if (onTickCb.current) {\n          onTickCb.current(seconds - timeLeft);\n        }\n        if (timeLeft === 0) {\n          if (onEnd) {\n            onEnd();\n          }\n          clearInterval(intervalId);\n        }\n        return timeLeft;\n      });\n    }, 1000);\n    return () => clearInterval(intervalId);\n    //  eslint-disable-next-line\n  }, []);\n\n  return (\n    <Label>\n      <Icon name=\"clock\" />\n      <span style={{ width: '35px', display: 'inline-block' }}>\n        {secondsLeft}\n      </span>\n    </Label>\n  );\n};\n\nexport default React.memo(Timer);\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport { Input } from 'semantic-ui-react';\n\ninterface Props {\n  expectedWord: string;\n  disabled: boolean;\n  value: string;\n  onInputChange: (s: string) => void;\n  onWordMatch: () => void;\n}\n\nconst CheckedInput = (props: Props) => {\n  const { expectedWord, onInputChange, onWordMatch, disabled, value } = props;\n  const inputRef = useRef<Input>(null);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [inputRef]);\n\n  const onChange = useCallback(\n    (_, { value: newValue }) => {\n      let updatedValue = newValue;\n      if (newValue === expectedWord) {\n        updatedValue = '';\n        onWordMatch();\n      }\n      onInputChange(updatedValue);\n    },\n    [expectedWord, onInputChange, onWordMatch],\n  );\n\n  return (\n    <Input\n      fluid\n      ref={inputRef}\n      value={value}\n      disabled={disabled}\n      onChange={onChange}\n      placeholder=\"Type the above text here when the race begins \"\n    />\n  );\n};\n\nexport default React.memo(CheckedInput);\n","import cx from 'classnames';\nimport React from 'react';\nimport { Segment } from 'semantic-ui-react';\n\nimport * as utils from '../../utils';\n\nimport styles from './CheckedText.module.scss';\n\ninterface Props {\n  textMap: ReturnType<typeof utils.textMap>;\n  currentWordIndex: number;\n}\n\nconst CheckedText = (props: Props) => {\n  const { textMap, currentWordIndex } = props;\n  const words = Array.from(textMap.words());\n\n  return (\n    <Segment inverted>\n      {words.map((word, wordIndex) => {\n        const isCurrent = wordIndex === currentWordIndex;\n        const isTyped = wordIndex < currentWordIndex;\n        return (\n          <span\n            key={wordIndex}\n            className={cx({\n              [styles.typed]: isTyped,\n              [styles.typing]: isCurrent,\n            })}\n          >\n            {word.text}\n          </span>\n        );\n      })}\n    </Segment>\n  );\n};\n\nexport default CheckedText;\n","function* allMatches(regex: RegExp, str: string) {\n  let match = regex.exec(str);\n\n  while (match) {\n    yield match;\n    match = regex.exec(str);\n  }\n}\n\nconst mapMatches = (\n  regex: RegExp,\n  str: string,\n  fn: (match: RegExpExecArray) => any,\n) => Array.from(allMatches(regex, str)).map(fn);\n\nconst Word = ({ offset, text }: { offset: number; text: string }) => {\n  // @ts-ignore\n  const [word, whitespace] = text.match(/([^\\s]+)(\\s|$)/).slice(1);\n  return {\n    letters: Array.from(text),\n    offset,\n    text,\n    whitespace,\n    word,\n    // tslint:disable-next-line: object-literal-sort-keys\n    hasWhitespace: () => Boolean(whitespace),\n  };\n};\n\nexport const textMap = (text: string) => {\n  const allWords = mapMatches(/[^\\s]+(\\s|$)/g, text, (match: RegExpExecArray) =>\n    Word({ text: match[0], offset: match.index }),\n  );\n\n  return {\n    text,\n    // tslint:disable-next-line: object-literal-sort-keys\n    getWord: (i: number) => allWords[i],\n    getWordOffset: (i: number) => allWords[i].offset,\n    words: () => allWords.values(),\n    wordsCount: () => allWords.length,\n  };\n};\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Form, Header, Progress } from 'semantic-ui-react';\nimport Timer from '../../components/Timer';\nimport CheckedInput from './components/CheckedInput';\nimport CheckedText from './components/CheckedText';\nimport * as utils from './utils';\n\ninterface Props {\n  text: string;\n  maxTime: number; // seconds\n  onFinish?: (status: { wpm: number; progress: number }) => void;\n}\n\nconst ActiveGame = ({ text, onFinish, maxTime }: Props) => {\n  const [wpm, setWpm] = useState(0);\n  const [wordIndex, setWordIndex] = useState(0);\n  const [progress, setProgress] = useState(1);\n  const [currentInput, setCurrentInput] = useState('');\n  const [isGameStarted, setIsGameStarted] = useState<boolean>(false);\n  const textMap = useMemo(() => utils.textMap(text), [text]);\n  const currentWord = useMemo(() => textMap.getWord(wordIndex), [\n    textMap,\n    wordIndex,\n  ]);\n\n  const onGameFinish = useCallback(() => {\n    if (onFinish) {\n      onFinish({ wpm, progress });\n    }\n  }, [onFinish, wpm, progress]);\n\n  useEffect(() => {\n    if (progress === 100) {\n      onGameFinish();\n    }\n  }, [onGameFinish, progress]);\n\n  const onWaitingTimerEnd = useCallback(() => {\n    setIsGameStarted(true);\n  }, [setIsGameStarted]);\n\n  const onWordMatch = useCallback(() => {\n    if (wordIndex < textMap.wordsCount() - 1) {\n      setProgress(((wordIndex + 1) * 100) / textMap.wordsCount());\n      setWordIndex(wordIndex + 1);\n    } else {\n      setProgress(100);\n    }\n  }, [setWordIndex, setProgress, wordIndex, textMap]);\n\n  const onGameTimerTick = (elapsedSeconds: number) => {\n    setWpm(Math.floor((wordIndex * 60) / elapsedSeconds));\n  };\n\n  return (\n    <>\n      <Header inverted>\n        {isGameStarted ? (\n          <>\n            The race is on! Type the text below:{' '}\n            <Timer\n              key=\"game-timer\"\n              seconds={maxTime}\n              onEnd={onGameFinish}\n              onTick={onGameTimerTick}\n            />\n          </>\n        ) : (\n          <>\n            Get Ready to Race:{' '}\n            <Timer key=\"waiting-timer\" seconds={10} onEnd={onWaitingTimerEnd} />\n          </>\n        )}\n      </Header>\n      <div>WPM: {wpm}</div>\n      <Progress percent={progress} indicating color=\"olive\" />\n      <CheckedText textMap={textMap} currentWordIndex={wordIndex} />\n      <Form.Field>\n        <CheckedInput\n          expectedWord={currentWord.text}\n          disabled={!isGameStarted}\n          value={currentInput}\n          onInputChange={setCurrentInput}\n          onWordMatch={onWordMatch}\n        />\n      </Form.Field>\n    </>\n  );\n};\n\nexport default React.memo(ActiveGame);\n","import React, { useCallback, useContext, useState } from 'react';\nimport { Button, Label, Loader } from 'semantic-ui-react';\n\nimport { updateUser as updateUserDP } from '../../dataProvider';\nimport useTexts from './hooks/useTexts';\n\nimport StoreContext from '../../store/context';\nimport ActiveGame from './ActiveGame';\n\nconst Game = () => {\n  const [activeTextIdx, setActiveTextIdx] = useState(0);\n  const [{ currentUser }] = useContext(StoreContext);\n  const [inGame, setInGame] = useState(true);\n  const [result, setResult] = useState<{\n    wpm: number;\n    progress: number;\n  }>({ wpm: 0, progress: 0 });\n\n  const [texts] = useTexts(activeTextIdx);\n\n  const currentText = texts[activeTextIdx];\n\n  const onFinish = useCallback(\n    ({ wpm, progress }) => {\n      if (progress === 100 && currentUser) {\n        if (!currentUser.bestWpm || wpm > Number(currentUser.bestWpm)) {\n          updateUserDP({ ...currentUser, bestWpm: wpm });\n        }\n      }\n      setResult({ wpm, progress });\n      setActiveTextIdx(prevIdx => prevIdx + 1);\n      setInGame(false);\n    },\n    [currentUser],\n  );\n\n  const tryAgain = useCallback(() => setInGame(true), [setInGame]);\n\n  return (\n    <div>\n      <h3>Game</h3>\n      {!texts.length ? (\n        <Loader inverted active inline=\"centered\">\n          Loading...\n        </Loader>\n      ) : inGame ? (\n        <ActiveGame text={currentText} onFinish={onFinish} maxTime={60 * 3} />\n      ) : (\n        <>\n          <div>\n            <Label>WPM: {result.wpm}</Label>\n            <Label>Progress: {result.progress} %</Label>\n          </div>\n          <br />\n          <br />\n          <Button onClick={tryAgain} color=\"blue\">\n            Play Again\n          </Button>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(Game);\n","import React, { useEffect, useState } from 'react';\nimport { Image, List, Transition } from 'semantic-ui-react';\nimport { fetchAllUsers } from '../../dataProvider';\nimport { User } from '../../types';\nimport styles from './TopPlayers.module.scss';\n\nconst useUsersResult = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  useEffect(() => {\n    const fetch = () =>\n      fetchAllUsers().then(data => {\n        const filteredData = data.filter(\n          dataItem => 'nickname' in dataItem,\n        ) as User[];\n        setUsers(\n          filteredData.sort((a, b) => {\n            if (!a.bestWpm) {\n              return 1;\n            } else if (!b.bestWpm) {\n              return -1;\n            }\n            return Number(b.bestWpm) - Number(a.bestWpm);\n          }),\n        );\n      });\n    fetch();\n    const intervalId = setInterval(fetch, 5000);\n    return () => clearInterval(intervalId);\n  }, []);\n  return [users];\n};\n\nconst TopPlayers = () => {\n  const [users] = useUsersResult();\n  return (\n    <>\n      <h3>Best WPM</h3>\n      <Transition.Group\n        inverted\n        as={List}\n        duration={200}\n        divided\n        size=\"huge\"\n        verticalAlign=\"middle\"\n        style={{ textAlign: 'left' }}\n      >\n        {users.map(user => (\n          <List.Item key={user.nickname}>\n            <div className={styles.userItem}>\n              <Image\n                avatar\n                src={process.env.PUBLIC_URL + `/${user.gender}.png`}\n              />\n              <span>{user.nickname}</span>\n              <span className={styles.wpmStatus}>\n                {user.bestWpm ? user.bestWpm : '-'}\n              </span>\n            </div>\n          </List.Item>\n        ))}\n      </Transition.Group>\n    </>\n  );\n};\n\nexport default React.memo(TopPlayers);\n","import { User } from '../types';\n\nimport users from '../mock/users';\n\nimport { fetchUser } from '../dataProvider';\n\nconst sessionStorageKey = 'TypeRacer2019';\n\nconst setUserToStorage = ({ password, ...user }: User) => {\n  sessionStorage.setItem(sessionStorageKey, JSON.stringify(user));\n};\n\nexport const getUser = (): User => {\n  const user = sessionStorage.getItem(sessionStorageKey);\n  return user ? JSON.parse(user) : user;\n};\n\nexport const isAuthenticated = (): boolean => !!getUser();\n\nexport const signout = (): Promise<undefined> =>\n  new Promise(resolve => {\n    sessionStorage.removeItem(sessionStorageKey);\n    resolve();\n  });\n\nexport const signin = (\n  user: Pick<User, 'nickname' | 'password'>,\n): Promise<User> =>\n  new Promise((resolve, reject) => {\n    const mockUser = users.find(\n      ({ nickname, password }) =>\n        user.nickname === nickname && user.password === password,\n    );\n    if (mockUser) {\n      fetchUser(mockUser).then(userDb => {\n        if ('nickname' in userDb && userDb.nickname === mockUser.nickname) {\n          setUserToStorage(mockUser);\n          resolve(userDb);\n        } else {\n          reject();\n        }\n      });\n    } else {\n      reject();\n    }\n  });\n","import React, { useCallback, useContext } from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { Dropdown, Image } from 'semantic-ui-react';\nimport { signout } from '../../store/session';\n\nimport StoreContext from '../../store/context';\n\nconst ProfileDropdown = ({ history }: RouteComponentProps) => {\n  const logout = useCallback(() => signout().then(() => history.push('/')), [\n    history,\n  ]);\n  const [state] = useContext(StoreContext);\n  const gender = (state.currentUser && state.currentUser.gender) || 'male';\n  return (\n    <Dropdown\n      direction=\"left\"\n      text={state.currentUser && state.currentUser.nickname}\n      icon={\n        <Image\n          style={{ display: 'inline-block', marginLeft: '5px' }}\n          circular\n          size=\"mini\"\n          src={process.env.PUBLIC_URL + `/${gender}.png`}\n        />\n      }\n    >\n      <Dropdown.Menu>\n        <Dropdown.Item icon=\"sign-out\" text=\"Sign out\" onClick={logout} />\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\n\nexport default withRouter(React.memo(ProfileDropdown));\n","import React from 'react';\nimport { Grid, Header, Responsive } from 'semantic-ui-react';\nimport Game from '../Game';\nimport TopPlayers from '../TopPlayers';\n\nimport ProfileDropdown from '../../components/ProfileDropdown';\n\nconst Dashboard = () => {\n  return (\n    <>\n      <Header inverted dividing textAlign=\"right\" style={{ padding: '5px' }}>\n        <ProfileDropdown />\n      </Header>\n      <Responsive maxWidth={Responsive.onlyTablet.minWidth}>\n        <div style={{ padding: '10px' }}>\n          <Game />\n          <br />\n          <TopPlayers />\n        </div>\n      </Responsive>\n      <Responsive minWidth={Responsive.onlyTablet.minWidth}>\n        <Grid stackable divided inverted style={{ padding: '0 20px' }}>\n          <Grid.Column width={4}>\n            <TopPlayers />\n          </Grid.Column>\n          <Grid.Column width={12}>\n            <Game />\n          </Grid.Column>\n        </Grid>\n      </Responsive>\n    </>\n  );\n};\n\nexport default React.memo(Dashboard);\n","import React, { useCallback, useContext, useState } from 'react';\nimport {\n  Button,\n  Form,\n  Header,\n  Icon,\n  Image,\n  Input,\n  Message,\n  Modal,\n} from 'semantic-ui-react';\n\nimport StoreContext from '../../../store/context';\nimport { signin } from '../../../store/session';\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  onSigninSuccess: () => void;\n}\n\nconst SignInModal = React.memo(({ onClose, open, onSigninSuccess }: Props) => {\n  const [, setState] = useContext(StoreContext);\n  const [inProgress, setInProgress] = useState(false);\n  const [nickname, setNickName] = useState('');\n  const [hasError, setHasError] = useState(false);\n  const [password, setPassword] = useState('');\n  const changeNickName = useCallback((_, { value }) => setNickName(value), []);\n  const changePassword = useCallback((_, { value }) => setPassword(value), []);\n  const login = useCallback(() => {\n    setInProgress(true);\n    signin({ nickname, password })\n      .then(user => {\n        setState(prevState => ({ ...prevState, currentUser: user }));\n        onSigninSuccess();\n      })\n      .catch(() => setHasError(true))\n      .finally(() => setInProgress(false));\n  }, [nickname, password, onSigninSuccess, setState]);\n  const isValid = nickname && password;\n  return (\n    <Modal dimmer size=\"small\" open={open} onClose={onClose}>\n      <Modal.Content image>\n        <Image\n          circular\n          size=\"medium\"\n          src={process.env.PUBLIC_URL + '/male.png'}\n        />\n        <Modal.Description>\n          <Header>Sign in</Header>\n          <Form onSubmit={login}>\n            <Form.Field>\n              <Input\n                error={hasError}\n                placeholder=\"Nickname...\"\n                icon={<Icon name=\"user\" color=\"blue\" />}\n                value={nickname}\n                onChange={changeNickName}\n              />\n            </Form.Field>\n            <Form.Field>\n              <Input\n                error={hasError}\n                type=\"password\"\n                placeholder=\"Password...\"\n                icon={<Icon name=\"key\" color=\"blue\" />}\n                value={password}\n                onChange={changePassword}\n              />\n            </Form.Field>\n            <Button\n              fluid\n              type=\"submit\"\n              color=\"teal\"\n              disabled={inProgress || !isValid}\n              loading={inProgress}\n            >\n              Sign in\n            </Button>\n            {hasError && (\n              <Message negative>\n                <p>Try another nickname or password</p>\n              </Message>\n            )}\n          </Form>\n        </Modal.Description>\n      </Modal.Content>\n    </Modal>\n  );\n});\n\nexport default SignInModal;\n","import React, { useCallback, useMemo } from 'react';\nimport { Link, RouteComponentProps } from 'react-router-dom';\nimport { Button } from 'semantic-ui-react';\n\nimport { isAuthenticated } from '../../store/session';\nimport styles from './Home.module.scss';\nimport logo from './logo.png';\nimport SignInModal from './SignInModal';\n\nconst Home = (props: RouteComponentProps) => {\n  const { match, history, location } = props;\n  const openSignModal = useCallback(() => {\n    history.push('/?sign-in');\n  }, [history]);\n  const closeSignModal = useCallback(() => {\n    history.push(match.path);\n  }, [history, match]);\n  const isSignModalOpen = useMemo(() => location.search.includes('?sign-in'), [\n    location.search,\n  ]);\n  const onSigninSuccess = useCallback(() => {\n    history.push('/dashboard');\n  }, [history]);\n  return (\n    <>\n      <header className={styles.header}>\n        <div className={styles.grow}>\n          <img src={logo} className={styles.logo} alt=\"logo\" />\n        </div>\n      </header>\n      <main>\n        <h2>Type Racer Game</h2>\n        <div className=\"\">Increase your typing speed!</div>\n        <br />\n        {isAuthenticated() ? (\n          <Link to=\"/dashboard\">\n            <Button color=\"teal\" size=\"big\">\n              My Dashboard\n            </Button>\n          </Link>\n        ) : (\n          <>\n            <Button color=\"teal\" size=\"big\" onClick={openSignModal}>\n              Get Started &nbsp; &#x1F680;\n            </Button>\n            <SignInModal\n              open={isSignModalOpen}\n              onClose={closeSignModal}\n              onSigninSuccess={onSigninSuccess}\n            />\n          </>\n        )}\n      </main>\n    </>\n  );\n};\n\nexport default Home;\n","import React, { useState } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport styles from './App.module.scss';\nimport Page404 from './components/Page404';\nimport PrivateRoute from './components/PrivateRoute';\nimport Dashboard from './modules/Dashboard';\nimport Home from './modules/Home';\n\n// import { fetchRandomText } from './dataProvider';\nimport StoreContext, { getInitialState, State } from './store/context';\nimport { getUser } from './store/session';\n\nconst App: React.FC = () => {\n  const [state, setState] = useState<State>({\n    ...getInitialState(),\n    currentUser: getUser(),\n  });\n  return (\n    <div className={styles.app}>\n      <StoreContext.Provider value={[state, setState]}>\n        <Router basename={process.env.REACT_APP_BASE_URL}>\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <PrivateRoute path=\"/dashboard\" component={Dashboard} />\n            <Route component={Page404} />\n          </Switch>\n        </Router>\n      </StoreContext.Provider>\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ninterface Config {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          // tslint:disable-next-line\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              // tslint:disable-next-line:no-console\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              // tslint:disable-next-line:no-console\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      // tslint:disable-next-line:no-console\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      // tslint:disable-next-line:no-console\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'semantic-ui-css/semantic.min.css';\nimport App from './App';\nimport './index.scss';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}