(window["webpackJsonptype-racer"]=window["webpackJsonptype-racer"]||[]).push([[0],{115:function(e,t,r){e.exports={userItem:"TopPlayers_userItem__3fnZi",wpmStatus:"TopPlayers_wpmStatus__3b1rx",listHeader:"TopPlayers_listHeader__jjc-W"}},116:function(e,t,r){e.exports={logo:"Home_logo__12b51","logo-spin":"Home_logo-spin__2Qo13",grow:"Home_grow__1IOpb",header:"Home_header__3iaKa"}},152:function(e,t,r){e.exports={typed:"CheckedText_typed__3CHZn",typing:"CheckedText_typing__VSSvF"}},215:function(e,t,r){e.exports={app:"App_app__2ziFi"}},216:function(e,t,r){e.exports=r.p+"static/media/404.b3f1c2e9.svg"},235:function(e,t,r){e.exports=r.p+"static/media/logo.9d028f49.png"},251:function(e,t,r){e.exports=r(417)},416:function(e,t,r){},417:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(63),o=r.n(c),s=(r(256),r(30)),l=r(15),i=r(70),u=r(53),m=r(215),p=r.n(m),d=r(216),b=r.n(d);const O=n.a.memo(()=>n.a.createElement("img",{src:b.a,style:{height:"100vh"},alt:"404","data-testid":"404-img"}));O.displayName="Page404";var g=O,f=r(114);var y=n.a.createContext([{currentUser:void 0,players:[]},()=>{}]);var j=n.a.memo(e=>{let t=e.component,r=Object(f.a)(e,["component"]);const c=Object(a.useContext)(y),o=Object(l.a)(c,1)[0];return n.a.createElement(u.b,Object.assign({},r,{render:e=>o.currentUser?n.a.createElement(t,e):n.a.createElement(u.a,{to:{pathname:"/",state:{from:e.location}}})}))}),h=r(435),E=r(438),v=r(437),w=r(428),P=r(84),k=r(418);var S=[{id:"19putj",gender:"male",nickname:"rudolf",password:"123123"},{id:"mhy87",gender:"male",nickname:"bob",password:"123123"},{id:"t1pvr",gender:"female",nickname:"maria",password:"123123"},{id:"15jtl3",gender:"male",nickname:"john",password:"123123"},{id:"1092av",gender:"female",nickname:"oxy",password:"123123"}];const x=()=>{const e=sessionStorage.getItem("TypeRacer2019");return e?JSON.parse(e):e};var C=r(219),W=r.n(C);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const T={},N=(e,t={})=>new Promise((r,a)=>{const n=new XMLHttpRequest;n.open((t.method?t.method:"get").toUpperCase(),((e,t)=>e+W.a.stringify(t,{addQueryPrefix:!0}))(e,t.params),!0);const c=D({},T,{},t.headers);Object.keys(c).forEach(e=>{n.setRequestHeader(e,c[e])}),n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE)if(n.status>=200&&n.status<400)try{r({data:n.responseText?JSON.parse(n.responseText):void 0,statusCode:n.status})}catch(e){a({error:e,statusCode:n.status})}else if(n.status)try{a({error:JSON.parse(n.responseText),statusCode:n.status})}catch(e){a({error:e,statusCode:n.status})}else a({error:"An error occurred while sending the request.",statusCode:n.status})},n.onerror=function(){a({error:"Network error",statusCode:n.status})},n.send(JSON.stringify(t.data))});var I=((e={})=>{return["delete","get","head","options","post","put","patch"].reduce((t,r)=>(t[r]=(t,a={})=>N(t,D({},e,{},a,{method:r})),t),{})})();function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const M=()=>new Promise(e=>{sessionStorage.removeItem("TypeRacer2019"),e()}),R=e=>{const t=S.find(({nickname:t,password:r})=>e.nickname===t&&e.password===r);return new Promise((e,r)=>{t?A(t).then(a=>{"nickname"in a&&a.nickname===t.nickname?((e=>{e.password;let t=Object(f.a)(e,["password"]);sessionStorage.setItem("TypeRacer2019",JSON.stringify(t))})(t),e(a)):r()}):r()})},A=e=>I.get(`https://api.myjson.com/bins/${e.id}`).then(({data:e})=>e);var H=e=>{const t=Object(a.useState)([]),r=Object(l.a)(t,2),n=r[0],c=r[1];return Object(a.useEffect)(()=>{n.length&&e!==n.length-1||I.get("https://baconipsum.com/api/",{params:{type:"meat-and-filler",paras:1}}).then(({data:e})=>e).then(e=>c(t=>[...t,...e]))},[e,n]),[n]},z=r(427),J=r(429),$=r(46);var L=n.a.memo(e=>{const t=e.seconds,r=e.onEnd,c=e.onTick,o=Object(a.useState)(t),s=Object(l.a)(o,2),i=s[0],u=s[1],m=Object(a.useRef)(c);return Object(a.useEffect)(()=>{m.current=c},[c]),Object(a.useEffect)(()=>{const e=setInterval(()=>{u(a=>{const n=--a;return m.current&&m.current(t-n),0===n&&(r&&r(),clearInterval(e)),n})},1e3);return()=>clearInterval(e)},[]),n.a.createElement(P.a,{"data-testid":"timer"},n.a.createElement($.a,{name:"clock"}),n.a.createElement("span",{style:{width:"35px",display:"inline-block"}},i))}),q=r(426);var G=n.a.memo(e=>{const t=e.expectedWord,r=e.onInputChange,c=e.onWordMatch,o=e.disabled,s=e.value,l=Object(a.useRef)(null);Object(a.useEffect)(()=>{l.current&&l.current.focus()},[l]);const i=Object(a.useCallback)((e,{value:a})=>{let n=a;a===t&&(n="",c()),r(n)},[t,r,c]);return n.a.createElement(q.a,{fluid:!0,ref:l,value:s,disabled:o,onChange:i,placeholder:"Type the above text here when the race begins "})}),B=r(4),Q=r.n(B),X=r(436),Z=r(152),K=r.n(Z);var V=e=>{const t=e.textMap,r=e.currentWordIndex,a=Array.from(t.words());return n.a.createElement(X.a,{inverted:!0},a.map((e,t)=>{const a=t===r,c=t<r;return n.a.createElement("span",{key:t,className:Q()({[K.a.typed]:c,[K.a.typing]:a})},e.text)}))};const Y=e=>{const t=((e,t,r)=>Array.from(function*(e,t){let r=e.exec(t);for(;r;)yield r,r=e.exec(t)}(e,t)).map(r))(/[^\s]+(\s|$)/g,e,e=>(({offset:e,text:t})=>{const r=t.match(/([^\s]+)(\s|$)/).slice(1),a=Object(l.a)(r,2),n=a[0],c=a[1];return{letters:Array.from(t),offset:e,text:t,whitespace:c,word:n,hasWhitespace:()=>Boolean(c)}})({text:e[0],offset:e.index}));return{text:e,getWord:e=>t[e],getWordOffset:e=>t[e].offset,words:()=>t.values(),wordsCount:()=>t.length}};var ee=n.a.memo(({text:e,onFinish:t,maxTime:r})=>{const c=Object(a.useState)(0),o=Object(l.a)(c,2),s=o[0],i=o[1],u=Object(a.useState)(0),m=Object(l.a)(u,2),p=m[0],d=m[1],b=Object(a.useState)(1),O=Object(l.a)(b,2),g=O[0],f=O[1],y=Object(a.useState)(""),j=Object(l.a)(y,2),E=j[0],v=j[1],w=Object(a.useState)(!1),P=Object(l.a)(w,2),k=P[0],S=P[1],x=Object(a.useMemo)(()=>Y(e),[e]),C=Object(a.useMemo)(()=>x.getWord(p),[x,p]),W=Object(a.useCallback)(()=>{t&&t({wpm:s,progress:g})},[t,s,g]);Object(a.useEffect)(()=>{100===g&&W()},[W,g]);const _=Object(a.useCallback)(()=>{S(!0)},[S]),D=Object(a.useCallback)(()=>{p<x.wordsCount()-1?(f(100*(p+1)/x.wordsCount()),d(p+1)):f(100)},[d,f,p,x]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{inverted:!0},k?n.a.createElement(n.a.Fragment,null,"The race is on! Type the text below:"," ",n.a.createElement(L,{key:"game-timer",seconds:r,onEnd:W,onTick:e=>{i(Math.floor(60*p/e))}})):n.a.createElement(n.a.Fragment,null,"Get Ready to Race:"," ",n.a.createElement(L,{key:"waiting-timer",seconds:10,onEnd:_}))),n.a.createElement("div",null,"WPM: ",s),n.a.createElement(z.a,{percent:g,indicating:!0,color:"olive"}),n.a.createElement(V,{textMap:x,currentWordIndex:p}),n.a.createElement(J.a.Field,null,n.a.createElement(G,{expectedWord:C.text,disabled:!k,value:E,onInputChange:v,onWordMatch:D})))});function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var re=n.a.memo(()=>{const e=Object(a.useState)(0),t=Object(l.a)(e,2),r=t[0],c=t[1],o=Object(a.useContext)(y),i=Object(l.a)(o,1)[0].currentUser,u=Object(a.useState)(!0),m=Object(l.a)(u,2),p=m[0],d=m[1],b=Object(a.useState)({wpm:0,progress:0}),O=Object(l.a)(b,2),g=O[0],f=O[1],j=H(r),h=Object(l.a)(j,1)[0],E=h[r],v=Object(a.useCallback)(({wpm:e,progress:t})=>{100===t&&i&&(!i.bestWpm||e>Number(i.bestWpm))&&(e=>{I.put(`https://api.myjson.com/bins/${e.id}`,{data:F({},e),headers:{"content-type":"application/json;charset=UTF-8"}})})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i,{bestWpm:e})),f({wpm:e,progress:t}),c(e=>e+1),d(!1)},[i]),S=Object(a.useCallback)(()=>d(!0),[d]);return n.a.createElement("div",null,h.length?p?n.a.createElement(ee,{text:E,onFinish:v,maxTime:180}):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(P.a,null,"WPM: ",g.wpm),n.a.createElement(P.a,null,"Progress: ",g.progress," %")),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(k.a,{onClick:S,color:"blue"},"Play Again")):n.a.createElement(w.a,{inverted:!0,active:!0,inline:"centered"},"Loading..."))}),ae=r(440),ne=r(432),ce=r(244),oe=r(115),se=r.n(oe);const le=()=>{const e=Object(a.useState)([]),t=Object(l.a)(e,2),r=t[0],n=t[1];return Object(a.useEffect)(()=>{const e=()=>Promise.all(S.map(A)).then(([...e])=>e.filter(e=>!(e=>"status"in e&&[404,500].includes(e.status))(e))).then(e=>{const t=e.filter(e=>"nickname"in e);n(t.sort((e,t)=>e.bestWpm?t.bestWpm?Number(t.bestWpm)-Number(e.bestWpm):-1:1))});e();const t=setInterval(e,5e3);return()=>clearInterval(t)},[]),[r]};var ie=n.a.memo(()=>{const e=le(),t=Object(l.a)(e,1)[0];return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Top Players"),n.a.createElement("div",{className:se.a.listHeader},"wpm"),n.a.createElement(ae.a.Group,{inverted:!0,divided:!0,relaxed:!0,as:ne.a,duration:200,size:"large",verticalAlign:"middle",style:{marginTop:0}},t.map(e=>n.a.createElement(ne.a.Item,{key:e.nickname},n.a.createElement("div",{className:se.a.userItem},n.a.createElement(ce.a,{avatar:!0,src:"/type-racer"+`/${e.gender}.png`}),n.a.createElement("span",null,e.nickname),n.a.createElement("span",{className:se.a.wpmStatus},e.bestWpm?e.bestWpm:"-"))))))}),ue=r(433);function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var pe=Object(u.g)(n.a.memo(({history:e})=>{const t=Object(a.useContext)(y),r=Object(l.a)(t,2),c=r[0],o=r[1],i=Object(a.useCallback)(()=>M().then(()=>{o(e=>(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e})({},e,{currentUser:void 0})),e.push("/")}),[e]),u=c.currentUser&&c.currentUser.gender||"male";return n.a.createElement(ue.a,{"data-testid":"profile-dropdown",direction:"left",text:c.currentUser&&c.currentUser.nickname,icon:n.a.createElement(ce.a,{style:{display:"inline-block",marginLeft:"5px"},circular:!0,size:"mini",src:"/type-racer"+`/${u}.png`})},n.a.createElement(ue.a.Menu,null,n.a.createElement(ue.a.Item,{icon:"sign-out",text:"Sign out",onClick:i})))}));var de=n.a.memo(()=>n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{inverted:!0,dividing:!0,textAlign:"right",style:{padding:"5px"}},n.a.createElement(pe,null)),n.a.createElement(E.a,{maxWidth:E.a.onlyTablet.minWidth},n.a.createElement("div",{style:{padding:"10px"}},n.a.createElement(re,null),n.a.createElement("br",null),n.a.createElement(ie,null))),n.a.createElement(E.a,{minWidth:E.a.onlyTablet.minWidth},n.a.createElement(v.a,{stackable:!0,divided:!0,inverted:!0,style:{padding:"0 20px"}},n.a.createElement(v.a.Column,{width:4},n.a.createElement(ie,null)),n.a.createElement(v.a.Column,{width:12},n.a.createElement(re,null)))))),be=r(116),Oe=r.n(be),ge=r(235),fe=r.n(ge),ye=r(430),je=r(434);function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}const Ee=n.a.memo(({onClose:e,open:t,onSigninSuccess:r})=>{const c=Object(a.useContext)(y),o=Object(l.a)(c,2)[1],i=Object(a.useState)(!1),u=Object(l.a)(i,2),m=u[0],p=u[1],d=Object(a.useState)(""),b=Object(l.a)(d,2),O=b[0],g=b[1],f=Object(a.useState)(!1),j=Object(l.a)(f,2),E=j[0],v=j[1],w=Object(a.useState)(""),P=Object(l.a)(w,2),S=P[0],x=P[1],C=Object(a.useCallback)((e,{value:t})=>g(t),[]),W=Object(a.useCallback)((e,{value:t})=>x(t),[]),_=Object(a.useCallback)(()=>{p(!0),R({nickname:O,password:S}).then(e=>{o(t=>(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e})({},t,{currentUser:e})),r()}).catch(()=>v(!0))},[O,S,r,o]),D=O&&S;return n.a.createElement(ye.a,{dimmer:!0,size:"small",open:t,onClose:e},n.a.createElement(ye.a.Content,{image:!0},n.a.createElement(ce.a,{circular:!0,size:"medium",src:"/type-racer/male.png"}),n.a.createElement(ye.a.Description,null,n.a.createElement(h.a,null,"Sign in"),n.a.createElement(J.a,{onSubmit:_},n.a.createElement(J.a.Field,null,n.a.createElement(q.a,{error:E,placeholder:"Nickname...",icon:n.a.createElement($.a,{name:"user",color:"blue"}),value:O,onChange:C})),n.a.createElement(J.a.Field,null,n.a.createElement(q.a,{error:E,type:"password",placeholder:"Password...",icon:n.a.createElement($.a,{name:"key",color:"blue"}),value:S,onChange:W})),n.a.createElement(k.a,{fluid:!0,type:"submit",color:"teal",disabled:m||!D,loading:m},"Sign in"),E&&n.a.createElement(je.a,{negative:!0},n.a.createElement("p",null,"Try another nickname or password"))))))});Ee.displayName="SignInModal";var ve=Ee;var we=e=>{const t=e.match,r=e.history,c=e.location,o=Object(a.useContext)(y),s=Object(l.a)(o,1)[0].currentUser,u=Object(a.useCallback)(()=>{r.push("/?sign-in")},[r]),m=Object(a.useCallback)(()=>{r.push(t.path)},[r,t]),p=Object(a.useMemo)(()=>c.search.includes("?sign-in"),[c.search]),d=Object(a.useCallback)(()=>{r.push("/dashboard")},[r]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:Oe.a.header},n.a.createElement("div",{className:Oe.a.grow},n.a.createElement("img",{src:fe.a,className:Oe.a.logo,alt:"logo"}))),n.a.createElement("main",null,n.a.createElement("h2",null,"Type Racer Game"),n.a.createElement("div",{className:""},"Increase your typing speed!"),n.a.createElement("br",null),s?n.a.createElement(i.b,{to:"/dashboard"},n.a.createElement(k.a,{color:"teal",size:"big"},"My Dashboard")):n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,{color:"teal",size:"big",onClick:u},"Get Started \xa0 \ud83d\ude80"),n.a.createElement(ve,{open:p,onClose:m,onSigninSuccess:d}))))};function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var ke=()=>{const e=Object(a.useState)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{currentUser:void 0,players:[]},{currentUser:x()})),t=Object(l.a)(e,2),r=t[0],c=t[1];return n.a.createElement("div",{className:p.a.app},n.a.createElement(y.Provider,{value:[r,c]},n.a.createElement(i.a,{basename:"/type-racer"},n.a.createElement(u.d,null,n.a.createElement(u.b,{exact:!0,path:"/",component:we}),n.a.createElement(j,{path:"/dashboard",component:de}),n.a.createElement(u.b,{component:g})))))};r(416);const Se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xe(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const r=e.installing;null!=r&&(r.onstatechange=()=>{"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}o.a.render(n.a.createElement(ke,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/type-racer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="/type-racer/service-worker.js";Se?(!function(e,t){fetch(e).then(r=>{const a=r.headers.get("content-type");404===r.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):xe(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):xe(t,e)})}}()}},[[251,1,2]]]);
//# sourceMappingURL=main.83e38e36.chunk.js.map